{"found":27,"posts":[{"ID":622,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-05-10T03:08:58-04:00","modified":"2021-05-10T03:21:19-04:00","title":"Etch-A-Sketch Pro &#8211; Rotary Encoders as Mouse(s)","URL":"http:\/\/blog.yifangu.com\/2021\/05\/10\/etch-a-sketch-pro-rotary-encoders-as-mouses\/","short_URL":"https:\/\/wp.me\/pc4Yvy-a2","content":"\n<p>I recently got a few of those rotary encoders &#8211; I was planning to make them into a follow-focus system. It&#8217;s a two part process: 1 &#8211; make a USB interface for them; 2 &#8211; make software that uses Canon&#8217;s EDSDK to interface with my camera.<\/p>\n\n\n\n<p>So I decided to start on 1, then I got a bit carried away and got this monstrosity made &#8211; an Etch-A-Sketch for computers, because everything deserves rotary encoders.<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<span class=\"embed-youtube\" style=\"text-align:center; display: block;\"><iframe class='youtube-player' width='640' height='360' src='https:\/\/www.youtube.com\/embed\/fFy2sB9fdNw?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent' allowfullscreen='true' style='border:0;' sandbox='allow-scripts allow-same-origin allow-popups allow-presentation'><\/iframe><\/span>\n<\/div><figcaption>Etch-A-Sketch Pro in Action<\/figcaption><\/figure>\n\n\n\n<p>If you look very closely, each of the encoders has it&#8217;s own plug, since each is a independent USB HID device.<\/p>\n\n\n\n<figure class=\"wp-block-video wp-block-embed is-type-video is-provider-videopress wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<iframe width='500' height='282' src='https:\/\/video.wordpress.com\/embed\/L4nL7kTo?preloadContent=metadata&amp;hd=1' frameborder='0' allowfullscreen><\/iframe><script src='https:\/\/v0.wordpress.com\/js\/next\/videopress-iframe.js?m=1435166243'><\/script>\n<\/div><figcaption>Printing the Knob<\/figcaption><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"629\" data-permalink=\"http:\/\/blog.yifangu.com\/img_2232\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg\" data-orig-size=\"3024,1701\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"img_2232\" data-image-description=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg?w=1024\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg\" alt=\"\" class=\"wp-image-629\" \/><figcaption>Glamour Shot for the Encoder &#8211; Notice the Comic Sans?<\/figcaption><\/figure>\n\n\n\n<p>Next step for the monstrosity, given that I now have two computer-connected knobs side-by-side, is <a rel=\"noreferrer noopener\" href=\"https:\/\/en.wikipedia.org\/wiki\/Pong\" target=\"_blank\">Pong<\/a>. And then I can return to the original plan of making a camera accessory.<\/p>\n","excerpt":"<p>I recently got a few of those rotary encoders &#8211; I was planning to make them into a follow-focus system. It&#8217;s a two part process: 1 &#8211; make a USB interface for them; 2 &#8211; make software that uses Canon&#8217;s EDSDK to interface with my camera. So I decided to start on 1, then I [&hellip;]<\/p>\n","slug":"etch-a-sketch-pro-rotary-encoders-as-mouses","guid":"https:\/\/blog.yifangu.com\/?p=622","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"f90f1152ea3352cdf8a97976b3d28aad","featured_image":"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg","post_thumbnail":{"ID":629,"URL":"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232-e1620630624596.jpg","guid":"http:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2232.jpg","mime_type":"image\/jpeg","width":3024,"height":1701},"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{"making":{"ID":5950,"name":"making","slug":"making","description":"","post_count":7,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:making","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:making\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_format":{},"mentions":{}},"tags":{"making":{"ID":5950,"name":"making","slug":"making","description":"","post_count":7,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:making","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:making\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1556","key":"_thumbnail_id","value":"629"},{"id":"1551","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/622","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/622\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/622\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/622\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":491,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-05-03T03:00:52-04:00","modified":"2021-05-10T03:20:39-04:00","title":"Split Flap Display &#8211; Part 1","URL":"http:\/\/blog.yifangu.com\/2021\/05\/03\/split-flap-display-part-1\/","short_URL":"https:\/\/wp.me\/pc4Yvy-7V","content":"\n<p>I recently came by this <a href=\"https:\/\/www.youtube.com\/watch?v=ZArBfxaPzD8\">Technology Connection Video<\/a>, and I am intrigued by the mechanism of a split flap mechanical clock. I then ran across this <a href=\"https:\/\/github.com\/scottbez1\/splitflap\">GitHub project<\/a> for a split flap display and I decide to make my own.<\/p>\n\n\n\n<p>I made one tweak to the design: I made the letters laser engraved and cut out of card stock instead of PVC cards. This includes code changes for generating double-sided SVGs, which made this a lot easier. The PR is <a href=\"https:\/\/github.com\/scottbez1\/splitflap\/pull\/148\">here<\/a>. (now merged)<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"495\" data-permalink=\"http:\/\/blog.yifangu.com\/img_2201\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg\" data-orig-size=\"3024,4032\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone X&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1619835712&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4&quot;,&quot;iso&quot;:&quot;25&quot;,&quot;shutter_speed&quot;:&quot;0.025&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}\" data-image-title=\"img_2201\" data-image-description=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=225\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=768\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=768\" alt=\"\" class=\"wp-image-495\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=768 768w, https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=1536 1536w, https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=113 113w, https:\/\/yifangucom.files.wordpress.com\/2021\/05\/img_2201.jpeg?w=225 225w\" sizes=\"(max-width: 768px) 100vw, 768px\" \/><\/figure>\n\n\n\n<p>The result is actually pretty good.<\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<span class=\"embed-youtube\" style=\"text-align:center; display: block;\"><iframe class='youtube-player' width='640' height='360' src='https:\/\/www.youtube.com\/embed\/zYReqpKMI_E?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent' allowfullscreen='true' style='border:0;' sandbox='allow-scripts allow-same-origin allow-popups allow-presentation'><\/iframe><\/span>\n<\/div><\/figure>\n\n\n\n<p>There&#8217;s a bit of work left to do, but this looks great for a first attempt.<\/p>\n","excerpt":"<p>I recently came by this Technology Connection Video, and I am intrigued by the mechanism of a split flap mechanical clock. I then ran across this GitHub project for a split flap display and I decide to make my own. I made one tweak to the design: I made the letters laser engraved and cut [&hellip;]<\/p>\n","slug":"split-flap-display-part-1","guid":"https:\/\/blog.yifangu.com\/?p=491","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"c176766375eeb14312a25870fb57def2","featured_image":"","post_thumbnail":null,"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{},"post_format":{},"mentions":{}},"tags":{},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1211","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/491","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/491\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/491\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/491\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":474,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-05-03T00:32:29-04:00","modified":"2021-05-03T00:32:29-04:00","title":"Using Makefile for Non-programming Tasks","URL":"http:\/\/blog.yifangu.com\/2021\/05\/03\/using-makefile-for-non-programming-tasks\/","short_URL":"https:\/\/wp.me\/pc4Yvy-7E","content":"\n<p>Make is traditionally used to build artifacts from program source code. It can also be used for other tasks, where you need to &#8220;build&#8221; something out of a &#8220;source-of-truth&#8221;.<\/p>\n\n\n\n<p>For example: video-editing. I personally find <code>ffmpeg<\/code> able to generate better quality compressed videos than FCPX or Premiere Pro, which is especially important if the desired bitrate is low. One of the use cases is this website, which has a video background. It is important to keep the video size as small as possible for video to load in a reasonable amount of time, while maintaining an acceptable quality. FCPX unfortunately cannot do that.<\/p>\n\n\n\n<p>I can use a shell script of course. But it occurred to me that, <code>make<\/code> is actually the perfect tool for the job, if you treat the master video as the source file, and the resultant compressed videos as the artifacts.<\/p>\n\n\n\n<pre class=\"wp-block-code has-small-font-size\"><code>SOURCE = ..\/render\/out.mov\nLINES = 1080\nBITRATE = 1200k\n\nPHONY: clean all\n\nall: poster.jpg h264.mp4 vp9.webm\n\nclean:\n\trm -f poster.jpg h264.mp4 vp9.webm *.mbtree *.log\n\nposter.jpg: $(SOURCE)\n\tffmpeg -y -i $&lt; -vf scale=-1\\:$(LINES) -vframes 1 $@\n\nh264.mp4: $(SOURCE)\n\tffmpeg -y -i $&lt; -vf scale=-1\\:$(LINES) -c\\:v libx264 -b\\:v $(BITRATE) -preset veryslow -an -pass 1 $@\n\tffmpeg -y -i $&lt; -vf scale=-1\\:$(LINES) -c\\:v libx264 -b\\:v $(BITRATE) -preset veryslow -an -pass 2 $@\n\nvp9.webm: $(SOURCE)\n\tffmpeg -y -i $&lt; -vf scale=-1\\:$(LINES) -c\\:v libvpx-vp9 -b\\:v $(BITRATE) -an -pass 1 -deadline good $@\n\tffmpeg -y -i $&lt; -vf scale=-1\\:$(LINES) -c\\:v libvpx-vp9 -b\\:v $(BITRATE) -an -pass 2 -deadline good $@\n<\/code><\/pre>\n\n\n\n<p><\/p>\n","excerpt":"<p>Make is traditionally used to build artifacts from program source code. It can also be used for other tasks, where you need to &#8220;build&#8221; something out of a &#8220;source-of-truth&#8221;. For example: video-editing. I personally find ffmpeg able to generate better quality compressed videos than FCPX or Premiere Pro, which is especially important if the desired [&hellip;]<\/p>\n","slug":"using-makefile-for-non-programming-tasks","guid":"https:\/\/blog.yifangu.com\/?p=474","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":1,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"c48ceb6635e7ba3a6069fb58ad54b877","featured_image":"","post_thumbnail":null,"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{"stream-of-consciousness":{"ID":2219,"name":"stream-of-consciousness","slug":"stream-of-consciousness","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:stream-of-consciousness","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:stream-of-consciousness\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_format":{},"mentions":{}},"tags":{"stream-of-consciousness":{"ID":2219,"name":"stream-of-consciousness","slug":"stream-of-consciousness","description":"","post_count":1,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:stream-of-consciousness","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/tags\/slug:stream-of-consciousness\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1184","key":"_wpas_skip_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/474","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/474\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/474\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/474\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":444,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-02-26T20:08:39-05:00","modified":"2021-05-02T23:03:19-04:00","title":"Mining Ethereum on M1 Mac GPU","URL":"http:\/\/blog.yifangu.com\/2021\/02\/26\/mining-ethereum-on-a-m1-mac-gpu\/","short_URL":"https:\/\/wp.me\/pc4Yvy-7a","content":"\n<p>TL;DR: It&#8217;s possible to mine Ethereum on a M1 Mac GPU. Hashrate is about 2Mh\/s.<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"452\" data-permalink=\"http:\/\/blog.yifangu.com\/image-1-5\/\" data-orig-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png\" data-orig-size=\"1338,754\" data-comments-opened=\"1\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"image-1\" data-image-description=\"\" data-medium-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=300\" data-large-file=\"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=1024\" src=\"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=1024\" alt=\"\" class=\"wp-image-452\" srcset=\"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=1024 1024w, https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=150 150w, https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=300 300w, https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png?w=768 768w, https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png 1338w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><figcaption>Mining on a M1 Mac<\/figcaption><\/figure>\n\n\n\n<p>I&#8217;ve had my M1 MacBook Air for a bit of time now, and I also recently started mining Ethereum. I can&#8217;t help asking myself: What&#8217;s Ethereum mining performance like on a M1 Mac?<\/p>\n\n\n\n<p>The obvious thing to do first is to run the off-the-shelf <code>ethminer<\/code>, which gives the following error:<\/p>\n\n\n\n<pre class=\"wp-block-code\" style=\"font-size:14px;\"><code>ethminer 0.19.0-alpha.0\nBuild: darwin\/release\/appleclang\n\nUnrecognized platform Apple\nError: No usable mining devices found<\/code><\/pre>\n\n\n\n<p>Not good. Apparently Apple GPUs are not whitelisted in ethminer. That should be easy to fix. Relevant lines are in <code>libethash-cl\/CLMiner.cpp<\/code>, and I added Apple GPUs to the whitelist, pretending it&#8217;s an Intel GPU.<\/p>\n\n\n\n<p>Then <code>boost<\/code> won&#8217;t compile since it&#8217;s trying to compile with a <code>-fcoalesce-templates<\/code> argument, which doesn&#8217;t exist in recent clang versions. So I have to update <code>boost<\/code> to the latest version, and fix relevant <code>asio<\/code> code since <code>ethminer<\/code> was using deprecated <code>asio<\/code> APIs.<\/p>\n\n\n\n<p>I also need to upgrade OpenSSL to the latest version to have it support darwin + arm64.<\/p>\n\n\n\n<p>After getting everything to compile. Here&#8217;s the result:<\/p>\n\n\n\n<pre class=\"wp-block-code\" style=\"font-size:14px;\"><code>ethminer 0.19.0-17+commit.ce52c740.dirty\nBuild: darwin\/release\/appleclang\n\n i 19:51:36          Configured pool eth-us-east1.nanopool.org:9999\n i 19:51:36          Selected pool eth-us-east1.nanopool.org:9999\n i 19:51:36          Connection remotely closed by eth-us-east1.nanopool.org\n i 19:51:36          Stratum mode : EthereumStratum\/1.0.0 (NiceHash)\n i 19:51:36          Established connection to eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n i 19:51:36          Spinning up miners...\ncl 19:51:36 cl-0     Using Device : Intel GPU 0.0 Apple M1 OpenCL 1.2  Memory : 10.67 GB (11453251584 B)\n i 19:51:36          Extranonce set to 778d\n i 19:51:36          Extranonce set to 778d\n i 19:51:36          Authorized worker &#091;REDACTED]\n i 19:51:36          Epoch : 397 Difficulty : 10.00 Gh\n i 19:51:36          Job: c7fc5311\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\ncl 19:51:38 cl-0     Generating split DAG + Light (total): 4.10 GB\n i 19:51:38          Job: 40a57756\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\ncl 19:51:38 cl-0     OpenCL kernel\ncl 19:51:38 cl-0     Creating DAG buffer, size: 4.10 GB, free: 6.57 GB\ncl 19:51:38 cl-0     Creating light cache buffer, size: 65.62 MB\ncl 19:51:38 cl-0     Loading kernels\ncl 19:51:38 cl-0     Creating buffer for header.\ncl 19:51:38 cl-0     Creating mining buffer\n m 19:51:41          0:00 A0 0.00 h - cl0 0.00\n i 19:51:42          Job: 077b62f6\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:51:46          0:00 A0 0.00 h - cl0 0.00\n i 19:51:46          Job: 2835839e\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:51:51          0:00 A0 0.00 h - cl0 0.00\n m 19:51:56          0:00 A0 0.00 h - cl0 0.00\n i 19:51:57          Job: 97f724e7\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:52:01          0:00 A0 0.00 h - cl0 0.00\n m 19:52:06          0:00 A0 0.00 h - cl0 0.00\n m 19:52:11          0:00 A0 0.00 h - cl0 0.00\n m 19:52:16          0:00 A0 0.00 h - cl0 0.00\n i 19:52:16          Job: 54df0504\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:52:21          0:00 A0 0.00 h - cl0 0.00\ncl 19:52:22 cl-0     4.10 GB of DAG data generated in 44,060 ms.\n m 19:52:26          0:00 A0 184.16 Kh - cl0 184.16\n m 19:52:31          0:00 A0 1.96 Mh - cl0 1.96\n m 19:52:36          0:01 A0 1.98 Mh - cl0 1.98\n i 19:52:39          Job: d3b1da5e\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:52:41          0:01 A0 1.99 Mh - cl0 1.99\ncl 19:52:43 cl-0     Job: 54df0504\u2026 Sol: 0x778d000001d14c71\n i 19:52:43          **Accepted 150 ms. eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:52:46          0:01 A1 1.95 Mh - cl0 1.95\n m 19:52:51          0:01 A1 2.07 Mh - cl0 2.07\n m 19:52:56          0:01 A1 2.00 Mh - cl0 2.00\n m 19:53:01          0:01 A1 1.98 Mh - cl0 1.98\n i 19:53:01          Job: ccc2b97f\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n m 19:53:06          0:01 A1 1.97 Mh - cl0 1.97\n i 19:53:07          Job: 23919d82\u2026 eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n^C i 19:53:10 main     Got interrupt ...\n i 19:53:10 main     Disconnected from eth-us-east1.nanopool.org &#091;144.217.14.139:9999]\n i 19:53:10 main     Shutting down miners...\n i 19:53:16 main     Terminated!<\/code><\/pre>\n\n\n\n<p>Code is available at <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/gyf304\/ethminer-m1\" target=\"_blank\">https:\/\/github.com\/gyf304\/ethminer-m1<\/a><\/p>\n\n\n\n<h2>Is it worth it?<\/h2>\n\n\n\n<p>Um. Not really. At current Ethereum prices (2021-02-26), it generates $0.14 of profit per day. It&#8217;s still a profit, but very miniscule.<\/p>\n","excerpt":"<p>TL;DR: It&#8217;s possible to mine Ethereum on a M1 Mac GPU. Hashrate is about 2Mh\/s. I&#8217;ve had my M1 MacBook Air for a bit of time now, and I also recently started mining Ethereum. I can&#8217;t help asking myself: What&#8217;s Ethereum mining performance like on a M1 Mac? The obvious thing to do first is [&hellip;]<\/p>\n","slug":"mining-ethereum-on-a-m1-mac-gpu","guid":"https:\/\/blog.yifangu.com\/?p=444","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":46},"likes_enabled":true,"sharing_enabled":true,"like_count":3,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"4be4b2fb2b7917504cd48b860fd1b03f","featured_image":"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png","post_thumbnail":{"ID":452,"URL":"https:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png","guid":"http:\/\/yifangucom.files.wordpress.com\/2021\/02\/image-1.png","mime_type":"image\/png","width":1338,"height":754},"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{},"post_format":{},"mentions":{}},"tags":{},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1164","key":"_thumbnail_id","value":"452"},{"id":"1097","key":"_wpas_done_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/444","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/444\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/444\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/444\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}},{"ID":427,"site_ID":178501940,"author":{"ID":97007569,"login":"gyf304","email":false,"name":"Yifan Gu","first_name":"Yifan","last_name":"Gu","nice_name":"gyf304","URL":"http:\/\/yifangucom.wordpress.com","avatar_URL":"https:\/\/1.gravatar.com\/avatar\/7585ebd319dba52f7133befbc6d7edd8?s=96&d=identicon&r=G","profile_URL":"https:\/\/en.gravatar.com\/gyf304","site_ID":178501940},"date":"2021-02-21T02:24:59-05:00","modified":"2021-02-21T02:25:46-05:00","title":"LAN Party VPN &#8211; My experience with WinTun, Windows Firewall, NSIS and Windows Defender","URL":"http:\/\/blog.yifangu.com\/2021\/02\/21\/lan-party-vpn-my-experience-with-wintun-windows-firewall-nsis-and-windows-defender\/","short_URL":"https:\/\/wp.me\/pc4Yvy-6T","content":"\n<p>I&#8217;ve recently made <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/gyf304\/lpvpn\" target=\"_blank\">LAN Party VPN<\/a>. It makes playing LAN games with friends on Discord effortless. LPVPN is written in C++, mostly because Discord SDK is only available in C, C++ and C#. So I didn&#8217;t have much of an option here.<\/p>\n\n\n\n<p>The idea of LPVPN is rather simple, get IP packets from WinTun (the Windows implementation of TUN by WireGuard), and send those using the Discord SDK, and of course the other way around. There were still a few things left on the table: IP assignment and package routing. Both of these were implemented in the most straight-forward way possible. A minimal GUI is slapped on to LPVPN to make everything a little bit more user friendly.<\/p>\n\n\n\n<p>I did ran into a few problems though:<\/p>\n\n\n\n<h5>Problem 1: Windows Firewall<\/h5>\n\n\n\n<p>Windows by default sets a network as &#8220;Public&#8221; with no easy way to reconfigure. A network interface being set to the &#8220;Public&#8221; profile gives Windows PCs a little bit more safety when connected to public networks. But in this case it totally destroys the intended use-case: LAN gaming. When a network is set to &#8220;Public&#8221;, other parties cannot connect to services on that interface, even if it listens to <code>0.0.0.0<\/code>. This means that if you will not be able to find and connect to games other people are hosting. I&#8217;m able to work around this using this <a rel=\"noreferrer noopener\" href=\"https:\/\/docs.microsoft.com\/en-us\/windows\/win32\/api\/netlistmgr\/nf-netlistmgr-inetwork-setcategory\" target=\"_blank\">API<\/a>, which is able to set a network as &#8220;Private&#8221;.<\/p>\n\n\n\n<h5>Problem 2: Packing everything into a single binary<\/h5>\n\n\n\n<p>I want users to download a standalone exe file, double click it, and have the VPN running. This proved to be a little bit hard since I need to bundle 2 dlls with the main binary: one for WinTun, and one for Discord. I want to package everything into a single binary since I don&#8217;t want users to download a ZIP file and manually unzip. For this I used <a rel=\"noreferrer noopener\" href=\"https:\/\/nsis.sourceforge.io\/Main_Page\" target=\"_blank\">NSIS<\/a>, which is usually used for creating software installer. In this case I used it as a way to automatically unpack the dlls and exe and then execute in a temporary directory. This works on paper until I run into problem 3.<\/p>\n\n\n\n<h5>Problem 3: Windows Defender False Positives<\/h5>\n\n\n\n<p>Unfortunately, as soon as I have the NSIS executable packaged. Windows Defender promptly deleted it from my computer and gave me a stern warning that it is a Trojan. (It&#8217;s kind of funny to see Windows do that.) This would not fly if I plan on distributing the software.<\/p>\n\n\n\n<h5>Problem 4: Problem 2, Electric Boogaloo<\/h5>\n\n\n\n<p>Since there&#8217;s really no easy way to fix problem 3. I have think of another way to solve problem 2. Fortunately I found <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/fancycode\/MemoryModule\" target=\"_blank\">MemoryModule<\/a>, which is a reimplementation of <code>LoadLibrary<\/code> and its friends in Windows. This means I can load dlls from memory, instead of from files. I ended up packing the dlls as resources using <a rel=\"noreferrer noopener\" href=\"https:\/\/github.com\/vector-of-bool\/cmrc\" target=\"_blank\">cmrc<\/a>, and then loading them using MemoryModule. This fixed the false positives from Windows Defender.<\/p>\n","excerpt":"<p>I&#8217;ve recently made LAN Party VPN. It makes playing LAN games with friends on Discord effortless. LPVPN is written in C++, mostly because Discord SDK is only available in C, C++ and C#. So I didn&#8217;t have much of an option here. The idea of LPVPN is rather simple, get IP packets from WinTun (the [&hellip;]<\/p>\n","slug":"lan-party-vpn-my-experience-with-wintun-windows-firewall-nsis-and-windows-defender","guid":"http:\/\/blog.yifangu.com\/?p=427","status":"publish","sticky":false,"password":"","parent":false,"type":"post","discussion":{"comments_open":true,"comment_status":"open","pings_open":true,"ping_status":"open","comment_count":0},"likes_enabled":true,"sharing_enabled":true,"like_count":0,"i_like":false,"is_reblogged":false,"is_following":false,"global_ID":"c496bb1644809f561ad85d79ea8746af","featured_image":"","post_thumbnail":null,"format":"standard","geo":false,"menu_order":0,"page_template":"","publicize_URLs":[],"terms":{"category":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"post_tag":{},"post_format":{},"mentions":{}},"tags":{},"categories":{"Uncategorized":{"ID":1,"name":"Uncategorized","slug":"uncategorized","description":"","post_count":27,"parent":0,"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/categories\/slug:uncategorized\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940"}}}},"attachments":{},"attachment_count":0,"metadata":[{"id":"1068","key":"_wpas_skip_25996971","value":"1"}],"meta":{"links":{"self":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/427","help":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/427\/help","site":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940","replies":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/427\/replies\/","likes":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/posts\/427\/likes\/"}},"capabilities":{"publish_post":false,"delete_post":false,"edit_post":false},"other_URLs":{}}],"meta":{"links":{"counts":"https:\/\/public-api.wordpress.com\/rest\/v1.1\/sites\/178501940\/post-counts\/post"},"next_page":"value=2021-02-21T02%3A24%3A59-05%3A00&id=427","wpcom":true}}